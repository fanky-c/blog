---
title: 构造函数和原型以及原型链
date: 2019-04-24 21:07:18
tags:
   - 构造函数
   - 原型
   - 原型链
---
### 什么是构造函数？
构造函数本身就是一个函数，与普通函数没有任何区别，不过为了规范一般将其首字母大写。构造函数和普通函数的区别在于，使用 new 生成实例的函数就是构造函数，直接调用的就是普通函数。


### constructor
1. constructor 返回创建实例对象时构造函数的引用。此属性的值是对函数本身的引用，而不是一个包含函数名称的字符串。
  1. 构造函数
    ```js
    function Parent(age) {
        this.age = age;
    }
    var p = new Parent(50);
    p.constructor === Parent; // true
    p.constructor === Object; // false
    ```
  2. 普通函数
    ```js
    function parent1(age) {
        return {
            age: age
        }
    }
    var p = parent1(20);
    p.constructor === Object; // true
    ```
2. 对于基本类型(String、Number、Boolean、Symbol、null、undefined)constructor只读，当然null、undefined没有构造属性；对于引用类型constructor可修改。

### new Class()详解
#### 案例
1. 代码：
```js
  function Person(name, age){
    this.name = name;
    this.age = age;
  }
  var p = new Person('chao', 12);
```
#### new Person('chao', 12)一个对象的4个过程
1. 创建一个空对象
```
var obj = new Object();
```
2. 让实例对象中this指向obj， 并且执行Person函数体
```
var result = Person.call(this);
```
3. 设置原型链，将obj的__proto__指向实例化对象的prototype成员对象
```
obj.__proto__ = Person.prototype;
```
4. 判断实例化返回类型
```
if(typeof(result) === 'object'){
   p = result;
}else{
  p = obj;
}
``` 
### 模拟实现new
### 原型
#### prototype
#### \__proto\__
#### 原型链
1. 含义：每个对象拥有一个原型对象，通过 \__proto\__ 指针指向上一个原型 ，并从中继承方法和属性，同时原型对象也可能拥有原型，这样一层一层，最终指向 null。这种关系被称为原型链 (prototype chain)